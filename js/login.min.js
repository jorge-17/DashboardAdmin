(function(a){a(window.jQuery,window,document)}(function($,window,document){var datos;var resultado;var resultadoP;const rootURL="https://wsi01.sctslp.gob.mx/wcf/Dashboard.svc/";const autenticacion="Autenticacion";const permisos="ObtenerPermisos";$("#btnLogin").on('click',async function(){var user=$("#user").val();var pass=$("#pass").val();try{resultadoP=await $.ajax({type:"POST",async:!1,url:rootURL+permisos,data:JSON.stringify({usuario:user,password:pass}),contentType:"application/json;charset=utf-8",dataType:"json"})}catch(error){console.log(error)}
    $.when(resultadoP).then(function(data){const cPrefix='permit_';datos=JSON.parse(data.d);const arrayPer=[];const arrayRol=[];const arrarRolDes=[];const itemS=datos.aoData;if(itemS!=null){itemS.forEach(element=>{arrayPer.push(element.permiso);arrayRol.push(element.rol);arrarRolDes.push(element.des_rol)});arrayRol.forEach(element=>{if(element===7){$.cookie(cPrefix+'Admin',1)}
        if(element===8){$.cookie(cPrefix+'ARutas',1)}
        if(element===9){$.cookie(cPrefix+'AReportes',1)}
        if(element===10){$.cookie(cPrefix+'STramites',1)}});sessionStorage.setItem('permisos',arrayPer);sessionStorage.setItem('roles',arrayRol)}else{}});try{resultado=await $.ajax({type:"POST",async:!1,url:rootURL+autenticacion,data:JSON.stringify({usuario:user,password:pass}),contentType:"application/json;charset=utf-8",dataType:"json"})}catch(error){console.log(error)}
    $.when(resultado).then(function(data){datos=JSON.parse(data.d);var item=datos.aoData;if(item!=null){var tokenS=item.split("|");sessionStorage.setItem('token',tokenS[0]);sessionStorage.setItem('NombreU',tokenS[1]);window.location.replace("https://wsi01.sctslp.gob.mx/wcf/Dashboard/views/home.html")}else{new PNotify({title:'Datos incorrectos',text:'Verifica que las credenciales sean correctas',type:'error',styling:'bootstrap3'})}})})}))