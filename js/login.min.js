!function(a){a(window.jQuery,window,document)}(function($,window,document){var datos,resultado,resultadoP,arrayP=[];const rootURL="https://wsi01.sctslp.gob.mx/wcf/Dashboard.svc/",autenticacion="Autenticacion",permisos="ObtenerPermisos",consultarPermisos="ObtenerPermisosG";$("#btnLogin").on("click",async function(){var user=$("#user").val(),pass=$("#pass").val();try{resultadoP=await $.ajax({type:"POST",async:!1,url:rootURL+permisos,data:JSON.stringify({usuario:user,password:pass}),contentType:"application/json;charset=utf-8",dataType:"json"})}catch(error){console.log(error)}$.when(resultadoP).then(function(data){const cPrefix="permit_";datos=JSON.parse(data.d);const arrayPer=[],arrayRol=[],arrarRolDes=[],itemS=datos.aoData;null!=itemS&&(itemS.forEach(element=>{arrayPer.push(element.permiso),arrayRol.push(element.rol),arrarRolDes.push(element.des_rol)}),arrayPer.forEach(element=>{$.cookie(cPrefix+element,1)}),sessionStorage.setItem("permisos",arrayPer),sessionStorage.setItem("roles",arrayRol))});try{resultado=await $.ajax({type:"POST",async:!1,url:rootURL+autenticacion,data:JSON.stringify({usuario:user,password:pass}),contentType:"application/json;charset=utf-8",dataType:"json"})}catch(error){console.log(error)}$.when(resultado).then(function(data){var item=(datos=JSON.parse(data.d)).aoData;if(null!=item){var tokenS=item.split("|");sessionStorage.setItem("token",tokenS[0]),sessionStorage.setItem("NombreU",tokenS[1]),window.location.replace("https://wsi01.sctslp.gob.mx/wcf/Dashboard/views/home.html")}else new PNotify({title:"Datos incorrectos",text:"Verifica que las credenciales sean correctas",type:"error",styling:"bootstrap3"})});try{var result=await $.ajax({type:"POST",async:!1,url:rootURL+consultarPermisos,data:JSON.stringify({token:sessionStorage.getItem("token")}),contentType:"application/json;charset=utf-8",dataType:"json"})}catch(error){console.log(error)}$.when(result).then(function(data){var datos,itemData;JSON.parse(data.d).aoData.forEach(element=>{arrayP.push(element.clavePer)}),sessionStorage.setItem("perG",arrayP)})})});